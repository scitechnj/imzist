@using System.Collections
@using Imzist.Web.Helpers
@model Imzist.Web.Models.AddListingViewModel


@section styles
{

    <style>
        .form-control {
            margin-bottom: 29px;
        }

        .col-sm-10 {
            font-size: 80%;
            margin-right: 5px;
        }
    </style>
}

<div class="container" style="margin-top: 200px;">
    <div class="row">
        <div class="col-sm-12 col-lg-12">
            <div class="account-wall" style="border-radius: 15px;">
                <form method="POST" action="/@LocationResolver.GetLocation().Name/Item/Add" enctype="multipart/form-data" style="color: white; font-size: 150%;">
                    <input type="hidden" name="Item.UserId" value="@Model.UserId"/>
                    <div class="col-lg-3">
                        <input type="hidden" name="Item.UserId" value="@Model.UserId"/>
                        <label for="Item.Title">Title</label>
                        <input id="itemTitle" type="text" class="form-control" name="Item.Title"/>
                        <label for="Item.CategoryId">Category</label>
                        <select class="form-control" name="Item.CategoryId">
                            @foreach (var category in Model.Categories)
                            {
                                <option value="@category.Id">@category.Name</option>
                            }
                        </select>
                        <label for="expirationDays">Expiration</label>
                        <select class="form-control" name="expirationDays" style="margin-bottom: 20px;">
                            <option value="7">7 Days</option>
                            <option value="14">14 Days</option>
                            <option value="30">30 Days</option>
                        </select>
                    </div>
                    <div class="col-lg-6">
                        <label for="Item.Description">Description</label>
                        <textarea class="form-control" name="Item.Description" rows="10"></textarea>
                    </div>
                    <div class="col-lg-3">
                        <label>Select Images</label>
                        <div class="row">
                            <div class="col-sm-10">
                                <input class="image1" type="text" style="width:210px; height: 35px;">
                            </div>
                            <div class="col-sm-1">
                                <a class="btn btn-primary browsebutton" data-imageid="1">Browse</a>
                            </div>
                        </div>
                        <div class="row" style="padding-top: 14px;">
                            <div class="col-sm-10">
                                <input class="image2" type="text" style="width:210px; height: 35px;">
                            </div>
                            <div class="col-sm-1">
                                <a class="btn btn-primary browsebutton" data-imageid="2">Browse</a>
                            </div>
                        </div>
                        <div class="row" style="padding-top:14px;">
                            <div class="col-sm-10">
                                <input class="image3" type="text" style="width:210px; height: 35px;">
                            </div>
                            <div class="col-sm-1">
                                <a class="btn btn-primary browsebutton" data-imageid="3">Browse</a>
                            </div>
                        </div>
                        <div class="row" style="padding-top:14px;">
                            <div class="col-sm-10">
                                <input class="image4" type="text" style="width:210px; height: 35px;">
                            </div>
                            <div class="col-sm-1">
                                <a class="btn btn-primary browsebutton" data-imageid="4">Browse</a>
                            </div>
                        </div>
                        <div class="row" style="padding-top:14px;">
                            <div class="col-sm-10">
                                <input class="image5" type="text" style="width:210px; height: 35px;">
                            </div>
                            <div class="col-sm-1">
                                <a class="btn btn-primary browsebutton" data-imageid="5">Browse</a>
                            </div>
                        </div>
                        <input type="file" id="image1" name="Images[0]" style="display: none;"/>
                        <input type="file" id="image2" name="Images[1]" style="display: none;" />
                        <input type="file" id="image3" name="Images[2]" style="display: none;" />
                        <input type="file" id="image4" name="Images[3]" style="display: none;" />
                        <input type="file" id="image5" name="Images[4]" style="display: none;" />
                    </div>
                    <div class="col-lg-6 col-lg-offset-3" style="margin-top: 25px;">
                        <button id="submitButton" class="btn btn-primary btn-lg btn-block">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@*<embed src="/Content/20440__agfx__beep-pager.wav" autostart="false" width="0" height="0" id="error"*@
@*    enablejavascript="true">*@

@section scripts
{
    <script>
        $(function() {
            var lis = $('.nav > li');
            menu_focus(lis[2], 4);
            
            $('<audio id="error"><source src="/Content/20440__agfx__beep-pager.wav" type="audio/wav"></audio>').appendTo('body');

            var count = 1;
            $("#itemTitle").keydown(function () {
                console.log(($("#itemTitle").val().length >= 50) + " - " + count++);
                if ($("#itemTitle").val().length == 50) {
                    $(this).val($(this).val().substring(0, 49));
//                    $("#error")[0].play();
                }
            });

            $(".browsebutton").click(function () {
                var id = $(this).data("imageid");
                $("input[id=image" + id + "]").click();
            });

            $("input:file").change(function() {
                var id = $(this).attr("id");
                $("." + id).val($(this).val());
            });

        });
        
        function PlaySound(soundObj) {
            var sound = document.getElementById(soundObj);
            sound.Play();
        }
    </script>
}
